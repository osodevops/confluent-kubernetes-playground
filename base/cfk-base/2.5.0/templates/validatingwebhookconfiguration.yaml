---
# Source: confluent-for-kubernetes/templates/validatingwebhookconfiguration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  labels:
    app: confluent-for-kubernetes
    app.kubernetes.io/name: confluent-for-kubernetes
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: "confluent-operator"
    helm.sh/chart: confluent-for-kubernetes-0.581.16
  name: confluent-operator-sandbox.webhook.platform.confluent.io
webhooks:
- admissionReviewVersions:
  - v1beta1
  clientConfig:
    service:
      name: confluent-operator
      namespace: sandbox
      path: /confluent-operator/validate
      port: 8443
  failurePolicy: Fail
  name: cfk-resources.webhooks.platform.confluent.io
  namespaceSelector:
    matchExpressions:
      - key: confluent-operator.webhooks.platform.confluent.io/disable
        operator: NotIn
        values: [ "true" ]
  objectSelector:
    matchExpressions:
      - key: confluent-operator.webhooks.platform.confluent.io/disable
        operator: NotIn
        values: [ "true" ]
  rules:
    - apiGroups:
        - platform.confluent.io
      apiVersions:
        - v1beta1
      operations:
        - DELETE
      resources:
        - zookeepers
        - kafkas
        - ksqldbs
        - controlcenters
      scope: Namespaced
  sideEffects: None
  timeoutSeconds: 10
- admissionReviewVersions:
    - v1beta1
  clientConfig:
    service:
      name: confluent-operator
      namespace: default
      path: /confluent-operator/validate
      port: 8443
  failurePolicy: Fail
  name: core-resources.webhooks.platform.confluent.io
  namespaceSelector:
    matchExpressions:
      - key: confluent-operator.webhooks.platform.confluent.io/disable
        operator: NotIn
        values: [ "true" ]
  objectSelector:
    matchLabels:
      confluent-platform: "true"
  rules:
    - apiGroups:
        - apps
      apiVersions:
        - v1
      operations:
        - DELETE
      resources:
        - statefulsets
      scope: Namespaced
  sideEffects: None
  timeoutSeconds: 10
- admissionReviewVersions:
    - v1beta1
  clientConfig:
    service:
      name: confluent-operator
      namespace: default
      path: /confluent-operator/validate
      port: 8443
  failurePolicy: Fail
  name: kafka-pods.webhooks.platform.confluent.io
  namespaceSelector:
    matchExpressions:
      - key: confluent-operator.webhooks.platform.confluent.io/disable
        operator: NotIn
        values: [ "true" ]
  objectSelector:
    matchLabels:
      confluent-platform: "true"
      platform.confluent.io/type: kafka
  rules:
    - apiGroups:
        - ""
      apiVersions:
        - v1
      operations:
        - DELETE
      resources:
        - pods
      scope: Namespaced
  sideEffects: None
  timeoutSeconds: 30
- admissionReviewVersions:
    - v1beta1
  clientConfig:
    service:
      name: confluent-operator
      namespace: sandbox
      path: /confluent-operator/validate
      port: 8443
  failurePolicy: Fail
  name: evictions.webhooks.platform.confluent.io
  namespaceSelector:
    matchExpressions:
  rules:
    - apiGroups:
        - ""
      apiVersions:
        - v1
      operations:
        - CREATE
      resources:
        - pods/eviction
      scope: Namespaced
  sideEffects: None
  timeoutSeconds: 30
